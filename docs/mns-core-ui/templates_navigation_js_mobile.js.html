<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: templates/navigation/js/mobile.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: templates/navigation/js/mobile.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import UI from '../../../base/base.ui';

const SCROLL_INTO_VIEW_DELAY = 160; // this needs to correspond the the CSS animation timing

export default class Mobile extends UI {

    /**
     * global navigation mobile UI enhancements
     * @param UIName {String}
     * @param type {String}
     * @param windowReference {Object} reference to browser window object
     */
    constructor(UIName, type, windowReference = window) {

        super(UIName, type);

        this.analytics();

        this.window = windowReference;
        this.lastTimeout = null;

        window.addEventListener('resize', function () {
            loadMobileJS.call(Mobile);
        });

        function loadMobileJS() {
            if (window.innerWidth &lt; 900) {
                this.bind();
            }
        }

        loadMobileJS.call(this);
    }

    /**
     * bind
     * @returns {void}
     */
    bind() {
        if (this.window.document.getElementsByClassName) {
            let checkboxes = this.window.document.getElementsByClassName('menu__mobile-level3');

            for (let iCheckbox = 0; iCheckbox &lt; checkboxes.length; iCheckbox++) {
                checkboxes[iCheckbox].onchange = (e) => {
                    this.level3Change(e);
                };
            }

            let radioButtons = this.window.document.getElementsByName('menu');

            for (let iRadio = 0; iRadio &lt; radioButtons.length; iRadio++) {
                radioButtons[iRadio].onchange = (e) => {
                    this.menuChange(e);
                };
            }
        }
    }

    /**
     * isElementVisible
     * @param el {Object}
     * @returns {Boolean}
     */
    isElementVisible(el) {

        let rect = el.getBoundingClientRect();

        return (
            rect.top >= 0 &amp;&amp;
            rect.left >= 0 &amp;&amp;
            rect.bottom &lt;= (this.window.innerHeight || this.window.document.documentElement.clientHeight) &amp;&amp;
            rect.right &lt;= (this.window.innerWidth || this.window.document.documentElement.clientWidth)
        );
    }

    /**
     * scrollCurrentLevel3IntoView
     * @param level3Id {String}
     * @returns {void}
     */
    scrollCurrentLevel3IntoView(level3Id) {
        this.window.clearTimeout(this.lastTimeout);

        this.lastTimeout = this.window.setTimeout(() => {
            let label = this.window.document.querySelector('[for=' + level3Id + ']');

            if (!this.isElementVisible(label)) {
                label.scrollIntoView();
            }
        }, SCROLL_INTO_VIEW_DELAY);
    }

    /**
     * deSelectLevel3Checkboxes
     * @param selectedCheckboxId {String}
     * @returns {void}
     */
    deSelectLevel3Checkboxes(selectedCheckboxId) {
        let checkboxes = this.window.document.querySelectorAll('.menu__mobile-level3:checked:not(#' + selectedCheckboxId + ')');

        for (let i = 0; i &lt; checkboxes.length; i++) {
            checkboxes[i].checked = false;
        }
    }

    /**
     * level3Change
     * @param e {Object}
     * @returns {void}
     */
    level3Change(e) {
        this.deSelectLevel3Checkboxes(e.target.id);
        this.scrollCurrentLevel3IntoView(e.target.id);
    }

    /**
     * menuChange
     * @param e {Object}
     * @returns {void}
     */
    menuChange(e) {
        this.deSelectLevel3Checkboxes(e.target.id);
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Analytics.html">Analytics</a></li><li><a href="Default.html">Default</a></li><li><a href="Mobile.html">Mobile</a></li><li><a href="Navigation.html">Navigation</a></li><li><a href="UI.html">UI</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sun Jul 31 2016 23:52:42 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
